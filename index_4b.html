<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Title, Favicon -->
		<title>SnailFarm 3 Testing</title>
		<link rel="shortcut icon" href="favicon.png" type="image/x-icon">		
		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="theme_bootstrap.css">
		<link rel="stylesheet" type="text/css" href="theme_snailfarm3.css">		
	</head>
	
	<body>
		<!-- TITLE -->
		<div class="jumbotron" align="center">
			<a name="top"><h1>SNAILFARM 3 TESTING!</h1></a>
			<h3>Your Favorite Ethereum Forest Adventure</h3>
			<a href="#quickstart"><img height="48" src="img/question_circle.png"></a> 
			<a href="https://ropsten.etherscan.io/address/0x8BECf05666D536c82aA72565dD9BaD4bC31F3bec" target="_blank"><img height="48" src="img/contract_circle.png"></a>
			<a href="https://discord.gg/8h3Emyb" target="_blank"><img height="48" src="img/discord_circle.png"></a>
			<a href="https://twitter.com/EtherSnailFarm" target="_blank"><img height="48" src="img/twitter_circle.png"></a>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<p>Contract balance: <span id="contractbalance">[undefined]</span> ETH</p>
				</div>
				<div class="col-sm" align="right">
					<p>Snailpot: <span id="snailpot">[undefined]</span> ETH</p>
				</div>
			</div>
		</div>
		<!-- ROUND INFO -->
		<div class="container">
			<div class="row">
				<div class="container-beige col-sm" align="left">	
					<h2>ROUND <span id="round">[undefined]</span></h2>
				</div>
				<div class="container-beige col-sm" align="center">
					<h2><span id="gameactive">Game Active?</span></h2>
				</div>
				<div class="container-beige col-sm" align="right">
					<h2><span id="roundpot">[undefined]</span> ETH</h2>
				</div>
			</div>
		</div>
		<div class="container" align="center">
			<span id="playerstatus"><img height="64" src="img/snail.png"></span>
		</div>
		<div class="container black-shadow" align="center">
			<h1>REACH 1 MILLION SNAILS TO WIN THE POT</h1>
			<h3><span id="leader">?</span> currently leading with <span id="leadersnail">?</span> snails.</h3><br>
		</div>
		<!-- LEADERBOARD -->
		<div class="jumbotron">
			<h2 align="center">LEADERBOARD</h2>
			<div class="container-beige leader-style">
				<h5><span id="leaderboard">Waiting for hatches...</span></h5>
			</div>
			<h2 align="center">EVENTS</h2>
			<div class="container-beige">
				<div class="scroll-box" id="logboxscroll">
					<span id="eventlog">Waiting for events...</span>
				</div>
			</div>
		</div>
		<!-- SNAILMASTER -->
		<div class="container black-shadow druid-img">
			<h2 align="center">Current Snailmaster: <span id="snailmaster">[undefined]</span></h2><br><br><br><br>
			<div class="row">
				<div class="col-sm">
					<h4>Spend <span id="snailmasterreq">[undefined]</span> red eggs to take their place</h4>
				</div>
				<div class="col-sm" align="right">
					<button class="btn btn-success" onclick="webBecomeSnailmaster()">Become Snailmaster!</button>
				</div>
			</div>	
		</div><br>
		<!-- SNAILS -->
		<div class="jumbotron snail-img" align="center">
			<div class="row">
				<div class="col-sm" align="left">
					<h1>MY SNAILS</h1>
				</div>
				<div class="col-sm" align="right">
					<h1><span id="playersnail">[undefined]</span></h1>
				</div>
			</div><br>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h4>Hatch Boost: <span id="hatchboost">[undefined]</span>x</h4>
				</div>
				<div class="col-sm" align="right">
					<h4>Producing <span id="playerprod">[undefined]</span> eggs per hour</h4>
				</div>
			</div><br>
			<div class="row">
				<div class="col-sm">
					<img height="64" src="img/spider.png" id="spider_yes"><img height="64" src="img/spider_grey.png" id="spider_no">
				</div>
				<div class="col-sm">
					<img height="64" src="img/squirrel.png" id="squirrel_yes"><img height="64" src="img/squirrel_grey.png" id="squirrel_no">
				</div>
				<div class="col-sm">
					<img height="64" src="img/tadpole.png" id="tadpole_yes"><img height="64" src="img/tadpole_grey.png" id="tadpole_no">
				</div>
				<div class="col-sm">
					<img height="64" src="img/lettuce.png" id="lettuce_yes"><img height="64" src="img/lettuce_grey.png" id="lettuce_no">
				</div>
				<div class="col-sm">
					<img height="64" src="img/carrot.png" id="carrot_yes"><img height="64" src="img/carrot_grey.png" id="carrot_no">
				</div>
				<div class="col-sm">
					<img height="64" src="img/slug.png" id="slug_yes"><img height="64" src="img/slug_grey.png" id="slug_no">
				</div>
			</div>
		</div>
		<!-- EGGS -->
		<div class="jumbotron egg-img" align="center">
			<div class="row">
				<div class="col-sm" align="left">
					<h1>MY EGGS</h1>
				</div>
				<div class="col-sm" align="right">
					<h1><span id="playeregg">[undefined]</span></h1>
				</div>
			</div><br>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>Hatch Eggs into <span id="hatchestimate">[undefined]</span> Snails</h5>
				</div>
				<div class="col-sm" align="right">
					<p>(Cost: 0.0008 ETH) <button class="btn btn-success" onclick="webHatchEgg()">HATCH</button></p>
				</div>
			</div>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>Sell Eggs for <span id="sellestimate">?</span> ETH</h5>
				</div>
				<div class="col-sm" align="right">
					<p>(Maximum reward: half of eggpot) <button class="btn btn-success" onclick="webSellEgg()">SELL</button></p>
				</div>
			</div>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>Buy <span id="buyestimate">?</span> Eggs for <span id="fieldBuy2">?</span> ETH <input type="text" id="fieldBuy" value="0.01" size="4">
				</div>
				<div class="col-sm" align="right">
					<p>(Maximum eggs in one buy: <span id="maxeggbuy">[undefined]</span>) <button class="btn btn-success" onclick="webBuyEgg()">BUY</button></p>
				</div>
			</div><br>
			<div class="row black-shadow">
				<div class="col-sm" align="right">
					<h5><span id="eggpot">[undefined]</span> ETH in the EggPot</h5>
				</div>
				<div class="col-sm" align="left">
					<h5><span id="marketegg">[undefined]</span> Eggs on the Market</h5>
				</div>
			</div>
		</div>
		<!-- REDS -->
		<div class="jumbotron red-img" align="center">
			<div class="row">
				<div class="col-sm" align="left">
					<h1>MY REDS</h1>
				</div>
				<div class="col-sm" align="right">
					<h1><span id="playerred">[undefined]</span></h1>
				</div>
			</div><br>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>Grab the Red Harvest at a cost of <span id="harvestcost">[undefined]</span> ETH</h5>
				</div>
				<div class="col-sm" align="right">
					<p>(Reward: 300 Red Eggs) <button class="btn btn-success" onclick="webClaimRedHarvest()">GRAB</button></p>
				</div>
			</div>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>Hatch <span id="fieldRed2">?</span> Red Eggs and get <span id="redestimate">?</span> Snails <input type="text" id="fieldRed" value="0" size="4"></h5>
				</div>
				<div class="col-sm" align="right">
					<p>(Red Eggs hatch for free) <button class="btn btn-success" onclick="webHatchRed()">HATCH</button></p>
				</div>
			</div>				
		</div>
		<!-- FRIENDS -->
		<div class="jumbotron" align="center">
			<div class="row">
				<div class="col-sm">
					<h1>SPIDERQUEEN</h1>
					<img height="96" src="img/spider.png">
					<h5 class="black-shadow">Owned by <span id="spiderowner">[undefined]</span></h3><br>
					<button class="btn btn-success" onclick="webBecomeSpiderQueen()">BECOME SPIDERQUEEN</button>
					<p>Requirement: <span id="spiderreq">[undefined]</span> Snails</p>
				</div>
				<div class="col-sm">
					<h1>SQUIRRELDUKE</h1>
					<img height="96" src="img/squirrel.png">
					<h5 class="black-shadow">Owned by <span id="squirrelowner">[undefined]</span></h3><br>
					<button class="btn btn-success" onclick="webBecomeSquirrelDuke()">BECOME SQUIRRELDUKE</button>
					<p>Requirement: <span id="squirrelreq">[undefined]</span> Reds</p>
				</div>
				<div class="col-sm">
					<h1>TADPOLE PRINCE</h1>
					<img height="96" src="img/tadpole.png">
					<h5 class="black-shadow">Owned by <span id="tadpoleowner">[undefined]</span></h3><br>
					<button class="btn btn-success" onclick="webBecomeTadpolePrince()">BECOME TADPOLEPRINCE</button>
					<p>Requirement: <span id="tadpolereq">[undefined]</span> ETH </p>
					<input type="text" id="fieldPrince" value="0.02" size="4">
				</div>
			</div>
		</div>
		<!-- FOOD -->
		<div class="jumbotron" align="center">
			<div class="row">
				<div class="col-sm">
					<h1>LETTUCE</h1>
					<img height="96" src="img/lettuce.png">
					<h5 class="black-shadow"><span id="haslettuce"></span></h3><br>
					<button class="btn btn-success" onclick="webFindLettuce()">FIND LETTUCE</button>
					<p>Requirement: <span id="lettucereq">[undefined]</span> Reds</p>
				</div>
				<div class="col-sm">
					<h1>CARROT</h1>
					<img height="96" src="img/carrot.png">
					<h5 class="black-shadow"><span id="hascarrot"></span></h3><br>
					<button class="btn btn-success" onclick="webFindCarrot()">FIND CARROT</button>
					<p>Requirement: 0.02 ETH</p>
				</div>
				<div class="col-sm">
					<h1>SLUG</h1>
					<img height="96" src="img/slug.png">
					<h5 class="black-shadow"><span id="hasslug"></span></h3><br>
					<button class="btn btn-success" onclick="webFindSlug()">FIND SLUG</button>
					<p>Requirement: at least 100 000 Snails</p>
				</div>
			</div>
		</div>
		<!-- ACORNS -->
		<div class="jumbotron acorn-img" align="center">
			<div class="row">
				<div class="col-sm" align="left">
					<h1>MY BALANCE</h1>
				</div>
				<div class="col-sm" align="right">
					<h1><span id="playerbalance">[undefined]</span> ETH</h1>
				</div>
			</div><br>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>Transfer your balance to your wallet</h5>
				</div>
				<div class="col-sm" align="right">
					<p>(Remember to claim your share too) <button class="btn btn-success" onclick="webWithdrawBalance()">WITHDRAW</button></p>
				</div>
			</div>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>You own <span id="playeracorn">[undefined]</span> Acorns</h5>
				</div>
				<div class="col-sm" align="right">
					<p>(Unclaimed share: <span id="playershare">?</span> ETH) <button class="btn btn-success" onclick="webClaimShare()">CLAIM</button></p>
				</div>
			</div>
			<div class="row black-shadow">
				<div class="col-sm" align="left">
					<h5>Fund Ethertree with <span id="fieldTree2">?</span> ETH to get <span id="treeestimate">?</span> Acorns <input type="text" id="fieldTree" value="0.01" size="4"></h5>
				</div>
				<div class="col-sm" align="right">
					<p>(Cost per acorn: <span id="acorncost">[undefined]</span>) <button class="btn btn-success" onclick="webFundTree()">FUND</button></p>
				</div>
			</div>
			<div class="col-sm black-shadow" align="center"><br>
				<h5>The Ethertree has grown a total of <span id="maxacorn">[undefined]</span> Acorns</h5>
			</div>
		</div>
		<!-- SNAILTHRONE -->
		<div class="container black-shadow throne-img">
			<h1 align="center">SNAILTHRONE</h1><br><br><br><br>
			<div class="row">
				<div class="col-sm" align="left">
					<h5>Send <span id="thronepot">[undefined]</span> ETH to SnailThrone holders</h5>
				</div>
				<div class="col-sm" align="right">
					<p>(No requirement) <button class="btn btn-success" onclick="webPayThrone()">SEND</button></p>
				</div>
			</div>
		</div><br>	
		<!-- QUICK START -->
		<div class="jumbotron">			
			<a name="quickstart"><h2 align="center">QUICK START</h2></a>
			<div class="container-beige">		
				<p><b>SnailFarm</b> is an idlegame played in rounds. The goal is to be the first to reach <b>1 million Snails</b>. Once you hatch enough snails to get to that number, you win the round and receive the current pot.</p><br>
				<p>At the end of the round, <b>all Snails and Eggs are wiped</b>, and the game starts anew 12 hours later.</p><br>
			</div>
			<div class="container-beige">
					<p>To get started, you must first buy starting Snails. This one-time transaction will allow you to play <b>every</b> round.</p><br>
					<p>Your Snails continuously <b>lay Eggs</b>, which you can hatch into even more Snails for a slight, fixed ETH cost. Each Egg can hatch into <b>more than one Snail</b>: the more Boosts you have, the more Snails per Egg.</p><br>
					<p>Eggs can be <b>bought and sold directly from the smart contract</b>. The price of Eggs <b>vary widely</b> based on the current supply of Eggs and the eggpot. If the eggpot has a lot of ETH but the market holds very few Eggs, it's time to sell. On the contrary, if the eggpot has little ETH but the market is filled with Eggs, it's a good opportunity to buy.</p><br>
			</div>
			<div class="container-beige">		
					<p>There is a special type of eggs: Red Eggs. Unlike normal Eggs and Snails, <b>Red Eggs carry over</b> from round to round. At the end of each round, every player receives <b>1 Red Egg for every 100 Snails</b> they own.</p><br>
					<p>During rounds, the Red Harvest is another way to get Red Eggs. The Red Harvest puts <b>300 Red Eggs</b> for auction at an ETH price starting high and <b>decreasing with time</b>.</p><br>
			</div>
			<div class="container-beige">		
					<p>Hatch Boosts exist in two kinds: Food, and Friends. You can only hold one of each particular boost. Both kind of Boosts give the same increase in hatch size: <b>+1 boost = +1 snail</b> per egg.</p><br>
					<p>Food Boosts are <b>your own</b>. These boosts are Lettuce, Carrot and Slug. They cost a certain amount of resources, and last for a number of rounds before disappearing.</p><br>
					<p>Friend Boosts are competitive: <b>only one player can own a specific friend boost</b> at a time.These boosts are the SpiderQueen, the SquirrelDuke and the TadpolePrince. Each Friend flip <b>increases the requirement</b> to get that boost. It is possible for a single player to hold several different Friends at once.</p><br>
			</div>
			<div class="container-beige">		
					<p>The Snailmaster is similar to Friend boosts, in that <b>only one player can hold it</b>. The Snailmaster has no direct game effect, but allows whoever owns it part of the <b>ETH of every incoming transaction</b> for as long as they hold the title.</p><br>
					<p>Through the Ethertree, players can <b>invest in the bankroll</b> of the game itself. Funding the Tree with ETH gives a number of acorns in return. <b>10% of all ETH spent</b> on the game is distributed between Acorn holders.</p><br>
					<p>Before the game starts for the first time, acorns are at <b>half price</b>. After that, their price lowers slightly with every round. Like Red Eggs, <b>Acorns carry over between rounds</b>. Acorns cannot be sold. Funding the game means <b>receiving dividends eternally</b>, although the price decrease ensures a dilution of investor shares to encourage newcomers.</p><br>
			</div>
			<div class="container-beige">		
					<p>SnailFarm is part of the <b>SnailThrone</b> ecosystem. SnailThrone holders are entitled to part of the ETH spent on SnailFarm. Check out SnailThrone if you want to know more: <a href="https://snailking.github.io/snailthrone/" target="_blank">https://snailking.github.io/snailthrone/</a></p><br>
			</div>
		</div>
		<!-- GAME MECHANICS -->
		<div class="jumbotron">
			<h2 align="center">GAME MECHANICS</h2><br>
			<h3>ROUNDS</h3>
			<div class="container-beige">
				<p>The jackpot for a round amounts to 10% of the Snailpot. This percentage is set when the round is initialized, so it doesn't change thorough the round.</p>
				<p>Rounds have no time limit and last until a player reaches 1M snails.</p>
				<p>After a round is won, the game undergoes a 12h downtime as to give everyone a fair chance to be ready for the next start.</p>
				<p>Once the timer hits 0, any player can start the round by clicking the button that will appear right under game status.</p>
				<p>Players who want to join a new round also need to click a button that will appear at that same position.</p>
			</div>
			<h3>SNAILS</h3>
			<div class="container-beige">
				<p>Players start with 300 Snails after buying their starting Snails. These starting Snails cost 0.004 ETH.</p>
				<p>Snails lay Eggs at a rate of 1 per Snail per day. 300 Snails = 300 Eggs in 24 hours.</p>
				<p>Snails cannot produce more Eggs than their numbers. Hatch at least once a day, if you don't want to waste potential Eggs.</p>
				<p>Hatching costs 0.0008 ETH (that's THREE 0s). If the hatch transaction results in 1M snails or more, the player wins the round.</p>
				<p>Snail count is reset to 0 at the end of a round. Joining a new round will give players 300 Snails again.</p>
			</div>
			<h3>EGGS</h3>
			<div class="container-beige">
				<p>Eggs can be bought from the smart contract with the following formula: ETH spent / (ETH spent + eggpot) * marketegg</p>
				<p>This means there are diminishing returns, with smaller buys getting proportionally more eggs.</p>
				<p>No more than 20% of the Egg supply can be bought at once. If a player spends more than the maximum buy, this ETH is refunded to the player balance.</p>
				<p>Eggs bought don't interfere with the maximum amount of Eggs Snails can lay. If you have 300 Snails and 100 Eggs (leaving you 200 potential Eggs) and buy 400 Eggs, your Snails can still lay 200 more Eggs, bringing you to a total of 700.</p>
				<p>Eggs can be sold to the smart contract with the following formula: ETH = (eggs / (eggs + marketeggs)) * eggpot / 2</p>
				<p>Like with buying, there are diminishing returns. The less eggs sold, the more ETH per eggs.</p>
				<p>Eggs are sold all at once. The maximum reward is half of the eggpot.</p>
			</div>
			<h3>RED EGGS</h3>
			<div class="container-beige">
				<p>Once they join a new round, players receive 1 Red Egg for every Snail they owned .</p>
				<p>Red Eggs can be hatched at no cost. However, their main utility are to claim various Boosts or the Snailmaster position itself.</p>
				<p>Red Eggs benefit from Hatch Boosts the same way as normal Eggs.</p>
				<p>While Red Eggs cannot be sold, they can be bought through the Red Harvest. The Red Harvest puts 300 Red Eggs for sale at a price initially similar to the Round jackpot.</p>
				<p>This price then decreases all the way to 0.002 ETH, over a period of 4 hours. This price decrease is sharp at first, then slower. The exact formula is: basePrice - maximumPriceChange * squareRootTimeElapsed / squareRoot4Hours</p>
				<p>Once a player grabs a Red Harvest, another one immediately starts at the original price (Round jackpot).</p>
			</div>
			<h3>FOOD</h3>
			<div class="container-beige">
				<p>The Lettuce lasts one round. Lettuces initially cost 20 Red Eggs * Round Number. This requirement then decreases by 20 for every Lettuce bought, down to a minimum of 20.</p>
				<p>Example: we're on Round 3, nobody has bought any Lettuce yet. The price of a Lettuce will be 20 * 3 = 60 Red Eggs. Once a player buys a Lettuce, the next Lettuce will cost 40 Red Eggs.</p>
				<p>The Carrot lasts three rounds. Carrots have a fixed price of 0.02 ETH.</p>
				<p>The Slug is permanent. Slugs require a sacrifice of all the Snails the player own, and the minimum amount of Snails required is 100 000.</p>
				<p>The Slug should be seen as a longterm play, giving up on a round in order to gain a significant advantage in further rounds.</p>
			</div>
			<h3>FRIENDS</h3>
			<div class="container-beige">
				<p>The requirement for Friends increases with every flip, and resets at the beginning of each new round.</p>
				<p>The SpiderQueen costs 80 Snails. This requirement doubles with every flip.</p>
				<p>The SquirrelDuke costs 2 Red Eggs. This requirement doubles with every flip.</p>
				<p>The TadpolePrince costs 0.02 ETH. This requirement increases by 20% with every flip. On the next flip, the Tadpole owner will receive 110% of the ETH he spent.</p>
				<p>Players can specify a higher amount of ETH than strictly required, in order to ensure they get the Tadpole through several flips. Any ETH over the requirement will be refunded to the player balance.</p>
				<p>The Slug should be seen as a longterm play, giving up on a round in order to gain a significant advantage in further rounds.</p>
			</div>
			<h3>SNAILMASTER</h3>
			<div class="container-beige">
				<p>The Snailmaster initially costs 4096 Red Eggs. This requirement decreases by half with every round.</p>
				<p>When the Snailmaster is claimed, his requirement doubles.</p>
				<p>Whoever holds the Snailmaster receives 5% out of every ETH transaction (save for the Tadpole, where most of the ETH goes back to the previous owner).</p>
			</div>
			<h3>ACORNS</h3>
			<div class="container-beige">
				<p>Acorn price is set at 0.001 ETH, and decreases according to the following formula: 10/ (10 + Round)</p>
				<p>This means on Round 1, the price for 1 Acorn will be 0.001 * 10 / 11 ~= 0.000909 ETH. On Round 10, the price for 1 Acorn will be 0.001 * 10 / 20 = 0.0005 ETH.</p>
				<p>Acorns cannot be sold. Acorn holders earn dividends forever. Being early is advantageous, however it is balanced by potential share dilution due to the decreasing cost.</p>
				<p>Round 0 offers Acorns at half price (0.0005 ETH), in order to incentivize an early bankroll funding.</p>
				<p>Acorn holders receive 10% of all ETH spent on the game (save for the Tadpole), distributed proportionally to their share of.</p>
			</div>
			<h3>SNAILTHRONE</h3>
			<div class="container-beige">
				<p>The Thronepot claims 10% of all ETH spent in the game (minus the Tadpole).</p>
				<p>This Thronepot can be sent at any moment, by any player. The sender doesn't receive any personal advantage for doing so. The ETH sent is split proportionally to SnailThrone holders.</p>
			</div>
			<h3>POT SPLIT</h3>
			<div class="container-beige">
				<p>Incoming ETH of each transaction is distributed as follows:</p>
				<p>- 50% to the Snailpot</p>
				<p>- 25% to the Eggpot</p>
				<p>- 10% to the Thronepot</p>
				<p>- 10% in dividends to Acorn holders</p>
				<p>- 5% to the current Snailmaster</p>
			</div>
			<div align="center">
				<a href="#top"><img height="48" src="img/arrow_circle.png"></a>
			</div>
		</div>
		
		<!-- Main Javascript -->
		<script src="snailfarm3_4b.js"></script>				
		<script>
			main()
		</script>
		
	</body>
</html>